{"version":3,"sources":["redux/actions/usersAction.js","redux/reducers/usersReducer.js","redux/store.js","config/constants.js","helpers/userSessionInfo.js","components/Header/Header.js","components/MessageArea/MessageList/MessageList.js","components/MessageArea/NewMessage/NewMessage.js","components/MessageArea/MessageArea.js","components/MessageArea/WelcomeMessage/WelcomeMessage.js","components/CounterMessages/CounterMessages.js","components/RoomList/RoomList.js","components/UserMenu/UserMenu.js","components/UserList/UserList.js","components/LeftSide/LeftSide.js","helpers/sockets.js","components/Main/Main.js","components/Login/Login.js","components/Register/Register.js","components/InviteUser/InviteUser.js","PrivateRoute.js","App.js","index.js"],"names":["types","setCurrentUser","userLogged","type","payload","addNewRoom","addNewMessage","initialState","isAuth","user","users","chatRoom","chatRooms","messages","devtoools","window","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","state","userTypes","chatroom","find","_id","count","filter","p","chat","constants","addUserSession","token","localStorage","setItem","axios","defaults","headers","common","removeUserSession","removeItem","getJwt","getItem","Header","props","className","chatRoom_name","onClick","logOut","moment","format","MessageList","map","msg","key","src","user_id","avatar","alt","firstname","lastname","username","date","fromNow","message","NewMessage","maxLength","placeholder","onKeyPress","e","shiftKey","target","value","readOnly","setReadonly","MessageArea","scrollToBottom","boxRef","current","scrollTop","scrollHeight","componentDidUpdate","React","createRef","ref","this","WithchatRooms","Component","style","width","height","opacity","CounterMessages","RoomList","setChatRoom","sala","index","chatRoomId","setCurrentChatRoom","id","name","UserMenu","editUsername","editPassword","UserList","inviteUser","u","LeftSide","currentChatRoom","that","get","then","res","setUsers","data","setMessages","resetCountNewMessages","catch","err","toast","error","response","alertify","prompt","evt","patch","resp","editCurrentUser","success","set","password","newChatRoom","post","redireccionar","history","push","undefined","confirm","setting","onok","link","navigator","clipboard","writeText","setHeader","ok","cancel","show","tittle","Helmet","reduce","c","content","mapDispatchToProps","connect","socket","initSocket","newMessageAudio","Audio","newState","getState","io","on","console","log","x","emit","chatroom_id","dispatch","receivedMessage","play","Main","sendMessage","connected","WelcomeMessage","length","autoClose","Login","addUserTochatRoom","userid","match","params","roomid","handleChange","event","setState","handleSubmit","preventDefault","other","iduser","to","onSubmit","htmlFor","autoFocus","onChange","required","Register","InviteUser","isLoading","userAdded","decoded","jwt_decode","margin","component","rest","render","App","exact","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e00993e9.chunk.js","sourcesContent":["export const types = {\r\n  set: \"SET_CURRENT_USER\",\r\n  edit: \"EDIT_CURRENT_USER\",\r\n  setUsers: \"SET_USERS\",\r\n  addNewRoom: \"ADD_CHATROOM\",\r\n  setChatRoom: \"SET_CURRENT_CHATROOM\",\r\n  setMessages: \"SET_MESSAGES\",\r\n  reset: \"RESET_STORE\",\r\n  addNewMessage: \"ADD_NEW_MESSAGE\",\r\n  setUserToken: \"SET_USER_TOKEN\",\r\n  setCountNewMessages: \"SET_COUNT_NEW_MESSAGES\",\r\n  resetCountNewMessages: \"RESET_COUNT_NEW_MESSAGES\"\r\n};\r\n\r\n// Asigna el current User\r\nexport const setCurrentUser = userLogged => ({\r\n  type: types.set,\r\n  payload: userLogged,\r\n});\r\n\r\n// Asigna el token User\r\nexport const setUserToken = payload => ({\r\n  type: types.setUserToken,\r\n  payload,\r\n});\r\n\r\n// Editar el current User\r\nexport const editCurrentUser = payload => ({\r\n  type: types.edit,\r\n  payload,\r\n});\r\n\r\n// Asigna Usuarios de sala Seleccionada\r\nexport const setUsers = users => ({\r\n  type: types.setUsers,\r\n  payload: users,\r\n});\r\n\r\n// Asigna nueva sala\r\nexport const addNewRoom = payload => ({\r\n  type: types.addNewRoom,\r\n  payload,\r\n});\r\n\r\n// Asigna current sala\r\nexport const setChatRoom = payload => ({\r\n  type: types.setChatRoom,\r\n  payload,\r\n});\r\n\r\n// Asigna mensajes de la sala seleccionada\r\nexport const setMessages = payload => ({\r\n  type: types.setMessages,\r\n  payload,\r\n});\r\n\r\n// Asigna nuevo mensaje\r\nexport const addNewMessage = payload => ({\r\n  type: types.addNewMessage,\r\n  payload,\r\n});\r\n\r\n// LogOut and reset store\r\nexport const logOut = () => ({\r\n  type: types.reset\r\n});\r\n\r\n\r\n// Actualiza contador de mensajes sin visualizar por chatroom\r\nexport const setCountNewMessages = payload => ({\r\n  type: types.setCountNewMessages,\r\n  payload,\r\n});\r\n\r\n// Resetea contador de mensajes sin visualizar por chatroom\r\nexport const resetCountNewMessages = payload => ({\r\n  type: types.resetCountNewMessages,\r\n  payload,\r\n})","import { types as userTypes } from \"../actions/usersAction\";\r\n\r\nconst initialState = {\r\n  isAuth: false,\r\n  user: {},\r\n  users: [],\r\n  chatRoom: {},\r\n  chatRooms: [],\r\n  messages: [],\r\n};\r\n\r\nexport default (state = initialState, { type, payload }) => {\r\n  switch (type) {\r\n    case userTypes.set:\r\n      return {\r\n        ...state,\r\n        isAuth: true,\r\n        user: payload.user,\r\n        chatRooms: payload.chatRooms,\r\n      };\r\n      case userTypes.edit:\r\n      return {\r\n        ...state,\r\n        user: payload,\r\n      };\r\n    case userTypes.setUsers:\r\n      return {\r\n        ...state,\r\n        users: payload,\r\n      };\r\n    case userTypes.reset:\r\n      return initialState;\r\n    case userTypes.addNewRoom:\r\n      return {\r\n        ...state,\r\n        chatRooms: [...state.chatRooms, payload],\r\n      };\r\n    case userTypes.setChatRoom:\r\n      return {\r\n        ...state,\r\n        chatRoom: payload,\r\n      };\r\n    case userTypes.setMessages:\r\n      return {\r\n        ...state,\r\n        messages: payload\r\n      }\r\n    case userTypes.addNewMessage:\r\n      return {\r\n        ...state,\r\n        messages: [...state.messages, payload],\r\n      }\r\n      case userTypes.setUserToken:\r\n        return {\r\n          ...state,\r\n          user: payload,\r\n          isAuth: true,\r\n        };\r\n      case userTypes.setCountNewMessages:\r\n        const chatroom = state.chatRooms.find(chatroom => chatroom._id === payload)\r\n        return {\r\n          ...state,\r\n          chatRooms: [\r\n            { ...chatroom, count: chatroom.count ? ++chatroom.count : 1},\r\n            ...state.chatRooms.filter(p => p!== chatroom), \r\n           ]\r\n        };\r\n        case userTypes.resetCountNewMessages:\r\n          const chat = state.chatRooms.find(chatroom => chatroom._id === payload)\r\n          delete chat.count; \r\n          return {\r\n            ...state,\r\n            chatRooms: [ \r\n              { ...chat}, \r\n              ...state.chatRooms.filter(p => p!== chat)]\r\n          }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createStore } from \"redux\";\r\nimport reducer from \"./reducers/usersReducer\";\r\n\r\nconst devtoools = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\nconst store = createStore(reducer, devtoools);\r\n\r\nexport default store;\r\n","export const constants = {\r\n  api: 'http://localhost:3001/api/',\r\n  JWTSecret: 'asdfghjkl',\r\n  numeroSalt: 10,\r\n  IP_Server: 'http://localhost:3001',\r\n  client: 'http://localhost:3000/',\r\n  newMessageSound: \"/sound/piece-of-cake.mp3\"\r\n};\r\n","import axios from 'axios';\r\n\r\nexport const addUserSession = token => {\r\n    // Agrega token al localStorage\r\n    localStorage.setItem('chatRoomJWT', token);\r\n    // Agrega token al header de Axios\r\n    axios.defaults.headers.common['auth-token'] = token;\r\n}\r\n\r\nexport const removeUserSession = () => {\r\n    // Remueve token al localStorage\r\n    localStorage.removeItem('chatRoomJWT');\r\n    // Remueve token al header de Axios\r\n    delete axios.defaults.headers.common['auth-token'];\r\n}\r\n\r\nexport const getJwt = () => localStorage.getItem('chatRoomJWT');\r\n","import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nconst Header = props => (\r\n  <nav className=\"main-nav\">\r\n    <ul>\r\n      <li>{props.chatRoom_name}</li>\r\n    </ul>\r\n    <div>\r\n      <button onClick={props.logOut}>Log Out</button>\r\n    </div>\r\n  </nav>\r\n);\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport moment from \"moment\";\r\nimport { constants } from \"../../../config/constants\";\r\nmoment().format();\r\n\r\nconst MessageList = (props) => (\r\n  <div>\r\n    {props.messages.map((msg) => (\r\n      <div key={msg._id} className=\"FlexRow\">\r\n        <img\r\n          src={`${constants.IP_Server}/avatars/${msg.user_id.avatar}`}\r\n          alt=\"\"\r\n          className=\"photoMsg\"\r\n        />\r\n        <div className=\"row width100\">\r\n          <div className=\"col-xs\">\r\n            <small>\r\n              {`${msg.user_id.firstname} ${msg.user_id.lastname}`}\r\n            </small>\r\n            <i>\r\n              <small> \r\n                {` [${msg.user_id.username}] `} \r\n              </small>\r\n            </i>\r\n            <span className=\"date\"> \r\n              {`  ${moment(msg.date).fromNow()}`} \r\n            </span>\r\n          </div>\r\n          <span className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n            {msg.message}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nMessageList.propTypes = {\r\n  optionalArrayOf: PropTypes.arrayOf(PropTypes.object),\r\n};\r\n\r\nexport default MessageList;\r\n","import React from \"react\";\r\n\r\nconst NewMessage = (props) => {\r\n  const handleUserKeyPress = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      props.onKeyPress(e.target.value);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <textarea\r\n      className=\"newMessage-container\"\r\n      type=\"text\"\r\n      maxLength=\"200\"\r\n      placeholder=\"Escribe un mensaje\"\r\n      onKeyPress={handleUserKeyPress}\r\n      readOnly={props.setReadonly}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import React, { Component } from \"react\";\r\nimport \"./MessageArea.css\";\r\nimport MessageList from \"./MessageList/MessageList\";\r\nimport NewMessage from \"./NewMessage/NewMessage\";\r\n\r\nclass MessageArea extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.boxRef = React.createRef();\r\n  }\r\n  scrollToBottom = () => {\r\n    this.boxRef.current.scrollTop = this.boxRef.current.scrollHeight;\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    this.scrollToBottom();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"messagesArea-container\">\r\n        <div className=\"messages-container\" ref={this.boxRef}>\r\n          <MessageList\r\n            messages={this.props.messages}\r\n            WithchatRooms={this.props.WithchatRooms} />\r\n        </div>\r\n        <NewMessage onKeyPress={this.props.onKeyPress} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MessageArea;\r\n","import React from \"react\";\r\n\r\nexport default (props) => {\r\n  return (\r\n    <div className=\"welcomeMessage\">\r\n      <strong>\r\n        <h2>Welcome To ChatRoom App</h2>\r\n      </strong>\r\n      <br />\r\n      {props.WithchatRooms ? (\r\n        <h3>\r\n          You have to add a new ChatRoom \r\n          <br />\r\n          <br />\r\n          In order to start a chat, You need to add a new chatRoom, invite\r\n          people and then start to chat with them\r\n        </h3>\r\n      ) : (\r\n        <h3>\r\n          Select a ChatRoom \r\n          <br /> \r\n          <br />\r\n          Send and receive messages in a chatRoom, you can share it with all\r\n          user into the chatroom\r\n        </h3>\r\n      )}\r\n      <img\r\n        alt=\"logo\"\r\n        src=\"/img/human-chain.png\"\r\n        style={{ width: \"250px\", height: \"250px\", opacity: \"0.5\" }} />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./CounterMessages.css\";\r\n\r\nconst CounterMessages = props => (\r\n    <span className=\"div-msg-counter\"> {props.count> 99 ? `+${props.count}` : props.count} </span>\r\n);\r\n\r\nexport default CounterMessages;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./RoomList.css\";\r\nimport \"../CounterMessages/CounterMessages\";\r\nimport CounterMessages from \"../CounterMessages/CounterMessages\";\r\n\r\nconst RoomList = (props) => (\r\n  <div>\r\n    <div className=\"tittle\">\r\n      <span style={{ width: \"90%\" }}> ChatRooms </span>\r\n      <div className=\"tooltip\" style={{ width: \"10%\" }}>\r\n        <span className=\"tooltiptext\">new chatRoom</span>\r\n        <span className=\"linkHover\" onClick={props.setChatRoom}>+</span>\r\n      </div>\r\n    </div>\r\n\r\n    <ul className=\"navSalas\">\r\n      {props.chatRooms.map((sala, index) => (\r\n        <li\r\n          className={\r\n            props.chatRoomId === sala._id ? \"linkSelected\" : \"linkHover\"\r\n          }\r\n          key={index}\r\n          onClick={props.setCurrentChatRoom}\r\n          id={sala._id}\r\n        >\r\n          {sala.name}\r\n          <sup key={index}>\r\n            {!sala.count && <CounterMessages count={sala.count} />}\r\n          </sup>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\nRoomList.propTypes = {\r\n  chatRooms: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default RoomList;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { constants } from \"../../config/constants\";\r\nimport \"./UserMenu.css\";\r\n\r\nconst UserMenu = (props) => (\r\n  <div>\r\n    <div className=\"datosUser\">\r\n      <img\r\n        src={`${constants.IP_Server}/avatars/${props.user.avatar}`}\r\n        alt=\"\"\r\n        className=\"photo\"\r\n      />\r\n      <span>\r\n        {props.user.firstname} {props.user.lastname}{\" \"}\r\n        <i>\r\n          <small>{` [${props.user.username}]`}</small>\r\n        </i>\r\n      </span>\r\n    </div>\r\n\r\n    <div>\r\n      <div className=\"tittle\">\r\n        <span> Menu </span>\r\n      </div>\r\n      <nav>\r\n        <ul className=\"userMenu\">\r\n          <li className=\"linkHover\" onClick={props.editUsername}>\r\n            Edit Username\r\n          </li>\r\n          <li className=\"linkHover\" onClick={props.editPassword}>\r\n            Change Password\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nUserMenu.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default UserMenu;\r\n","import React from \"react\";\r\nimport \"./UserList.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst UserList = (props) => (\r\n  <div>\r\n    <div className=\"tittle\">\r\n      <span style={{ width: \"90%\" }}> Users </span>\r\n      <div style={{ width: \"10%\" }}>\r\n        <span className=\"linkHover\" onClick={props.inviteUser}>+</span>\r\n      </div>\r\n    </div>\r\n    <nav>\r\n      <ul className=\"navUsers\">\r\n        {props.users.map((u, index) => (\r\n          <li className=\"linkHover\" key={index}>\r\n            {u.firstname} {u.lastname}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n);\r\n\r\nUserList.propTypes = {\r\n  users: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default UserList;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport alertify from \"alertifyjs\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport \"./LeftSide.css\";\r\nimport { constants } from \"../../config/constants\";\r\nimport RoomList from \"../RoomList/RoomList\";\r\nimport UserMenu from \"../UserMenu/UserMenu\";\r\nimport UserList from \"../UserList/UserList\";\r\nimport {\r\n  setUsers,\r\n  editCurrentUser,\r\n  addNewRoom,\r\n  setChatRoom,\r\n  setMessages,\r\n  resetCountNewMessages,\r\n} from \"../../redux/actions/usersAction\";\r\n\r\nclass LeftSide extends Component {\r\n  currentChatRoom = (e) => {\r\n    const that = this.props;\r\n    if (that.chatRoom._id === e.target.id) \r\n      return;\r\n    axios\r\n      .get(`${constants.api}chatroom/select/${e.target.id}`)\r\n      .then((res) => {\r\n        that.setUsers(res.data.users);\r\n        that.setChatRoom({ _id: res.data._id, name: res.data.name });\r\n        that.setMessages(res.data.messages);\r\n        that.resetCountNewMessages(res.data._id);\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  editUsername = () => {\r\n    const that = this.props;\r\n    alertify\r\n      .prompt(\r\n        \"Chage Username\",\r\n        \"New Username:\",\r\n        that.user.username,\r\n        function (evt, username) {\r\n          axios\r\n            .patch(`${constants.api}user/edit/${that.user._id}`, { username })\r\n            .then((resp) => {\r\n              that.editCurrentUser(resp.data);\r\n              alertify.success(\"Username Updated\");\r\n            })\r\n            .catch((err) => alertify.error(err.response?.data));\r\n        },\r\n        () => {}\r\n      )\r\n      .set(\"type\", \"text\");\r\n  };\r\n\r\n  editPassword = () => {\r\n    const that = this.props;\r\n    alertify\r\n      .prompt(\r\n        \"Change Password\",\r\n        \"New Password:\",\r\n        \"\",\r\n        function (evt, password) {\r\n          axios\r\n            .patch(`${constants.api}user/edit/${that.user._id}`, { password })\r\n            .then((resp) => {\r\n              that.editCurrentUser(resp.data);\r\n              alertify.success(\"Password Updated\");\r\n            })\r\n            .catch((err) => alertify.error(err.response?.data));\r\n        },\r\n        () => {}\r\n      )\r\n      .set(\"type\", \"password\");\r\n  };\r\n\r\n  newChatRoom = () => {\r\n    const that = this.props;\r\n    alertify\r\n      .prompt(\r\n        \"New RoomChat\",\r\n        \"Name:\",\r\n        \"\",\r\n        function (evt, name) {\r\n          axios\r\n            .post(`${constants.api}chatroom/create`, {\r\n              name,\r\n              users: [that.user._id],\r\n            })\r\n            .then((res) => {\r\n              that.addNewRoom(res.data);\r\n              that.setUsers(res.data.users);\r\n              that.setChatRoom({ _id: res.data._id, name: name });\r\n              that.setMessages(res.data.messages);\r\n              alertify.success(\"Ok: \" + name);\r\n            })\r\n            .catch((err) => toast.error(err.response?.data));\r\n        },\r\n        (err) => toast.error(err)\r\n      )\r\n      .set(\"type\", \"text\");\r\n  };\r\n\r\n  redireccionar = () => this.props.history.push(\"/login\");\r\n\r\n  inviteUser = () => {\r\n    const that = this.props;\r\n    if (that.chatRoom._id === undefined) {\r\n      alertify.error(\"You have to select a chatroom first\");\r\n      return;\r\n    }\r\n\r\n    alertify\r\n      .confirm()\r\n      .setting({\r\n        message: `Are you want to generate a link for invite users to chatroom <em> ${that.chatRoom.name}?</em> `,\r\n        onok: function () {\r\n          const link = `${constants.client}invite/user/${that.user._id}/chatroom/${that.chatRoom._id}`;\r\n          navigator.clipboard.writeText(link);\r\n          alertify.success(\"link Copied, now Paste & Share it\");\r\n        },\r\n      })\r\n      .setHeader(\"<strong> Invite User to ChatRoom </strong> \")\r\n      .set(\"labels\", {\r\n        ok: \"Yes, Copy link to clipboard\",\r\n        cancel: \"No, Cancel\",\r\n      })\r\n      .show();\r\n  };\r\n  render() {\r\n    const { user, users, chatRooms, chatRoom } = this.props;\r\n    const tittle = \".:. ChatRoom App .:.\";\r\n    return (\r\n      <div className=\"left-menu-container\">\r\n        <UserMenu\r\n          user={user}\r\n          editUsername={this.editUsername}\r\n          editPassword={this.editPassword}\r\n        />\r\n        <RoomList\r\n          setChatRoom={this.newChatRoom}\r\n          chatRooms={chatRooms}\r\n          chatRoomId={this.props.chatRoom._id}\r\n          setCurrentChatRoom={this.currentChatRoom}\r\n        />\r\n        {this.props.chatRoom._id && (\r\n          <UserList inviteUser={this.inviteUser} users={users} />\r\n        )}\r\n        <Helmet>\r\n          <title>\r\n            {this.props.chatRoom._id\r\n              ? `chatRoom ${chatRoom.name} ${\r\n                  chatRoom.count ? \"(\" + this.props.count + \")\" : \"\"\r\n                }`\r\n              : `${tittle} ${chatRooms.reduce(\r\n                  (count, c) => count + (c.count ? c.count : 0),\r\n                  0\r\n                )} messages`}\r\n          </title>\r\n          <meta name=\"title\" content={chatRoom._id ? chatRoom.name : tittle} />\r\n        </Helmet>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    users: state.users,\r\n    chatRooms: state.chatRooms,\r\n    chatRoom: state.chatRoom,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addNewRoom,\r\n  setUsers,\r\n  setChatRoom,\r\n  setMessages,\r\n  editCurrentUser,\r\n  resetCountNewMessages,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftSide);\r\n","import store from \"../redux/store\";\r\nimport io from \"socket.io-client\";\r\nimport { addNewMessage, setCountNewMessages } from '../redux/actions/usersAction';\r\nimport { constants } from \"../config/constants\";\r\n\r\nexport let socket = null;\r\n\r\nexport const initSocket = () => {\r\n  const newMessageAudio = new Audio(constants.newMessageSound);\r\n  let newState = store.getState();\r\n  socket = io(constants.IP_Server);\r\n  \r\n  socket.on(\"login\", (data) => {\r\n    console.log(\"WELCOME to SOCKET.IO \", data.id);\r\n    newState.chatRooms.map(x =>\r\n      socket.emit('enter to room', {\r\n        username: newState.user.username, \r\n        chatroom: x._id})\r\n    );\r\n  });\r\n\r\n  socket.on(\"new message\", (message) => {\r\n    console.log(\"new message\");\r\n    newState = store.getState();\r\n    if(newState.chatRoom._id === undefined ||  newState.chatRoom._id !== message.chatroom_id){\r\n      store.dispatch(setCountNewMessages(message.chatroom_id));\r\n    }\r\n    else {\r\n      receivedMessage(message);\r\n      newMessageAudio.play();\r\n    }\r\n  });\r\n\r\n  socket.on(\"reconnect\", () => {\r\n    console.log(\"you have been reconnected\");\r\n  });\r\n\r\n  socket.on(\"reconnect_error\", () => {\r\n    console.log(\"attempt to reconnect has failed\");\r\n  });\r\n\r\n  socket.on(\"disconnect\", () => {\r\n    console.log('disconnect')\r\n  })\r\n\r\n\r\n  const receivedMessage = (msg) => {\r\n    store.dispatch(addNewMessage(msg));\r\n  };\r\n\r\n  return socket;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"./main.css\";\r\nimport { constants } from \"../../config/constants\";\r\nimport { addNewMessage, logOut } from \"../../redux/actions/usersAction\";\r\nimport { removeUserSession } from \"../../helpers/userSessionInfo\";\r\nimport Header from \"../Header/Header\";\r\nimport MessageArea from \"../MessageArea/MessageArea\";\r\nimport WelcomeMessage from \"../MessageArea/WelcomeMessage/WelcomeMessage\";\r\nimport LeftSide from \"../LeftSide/LeftSide\";\r\nimport { socket } from \"../../helpers/sockets\";\r\n\r\nclass Main extends Component {\r\n  sendMessage = (message) => {\r\n    if (message === \"\" || message === \"\\n\" || !socket.connected) \r\n      return;\r\n\r\n    const msg = {\r\n      message,\r\n      user_id: this.props.user._id,\r\n      chatroom_id: this.props.chatRoom._id,\r\n    };\r\n\r\n    axios\r\n      .post(`${constants.api}chatroom/message/create`, msg)\r\n      .then((res) => {\r\n        msg.user_id = this.props.user;\r\n        this.props.addNewMessage({ ...res.data });\r\n        socket.emit(\"new message\", { ...res.data });\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  logOut = () => {\r\n    socket.emit(\"disconnection\");\r\n    removeUserSession();\r\n    this.props.logOut();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"dashboard\">\r\n        <LeftSide />\r\n        <div className=\"messages-area\">\r\n          <Header\r\n            chatRoom_name={this.props.chatRoom.name}\r\n            logOut={this.logOut}\r\n          />\r\n          {!this.props.chatRoom._id && (\r\n            <WelcomeMessage WithchatRooms={this.props.chatRooms.length === 0} />\r\n          )}\r\n          {this.props.chatRoom._id && (\r\n            <MessageArea\r\n              messages={this.props.messages}\r\n              onKeyPress={this.sendMessage}\r\n            />\r\n          )}\r\n          <ToastContainer autoClose={2000} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    chatRoom: state.chatRoom,\r\n    user: state.user,\r\n    chatRooms: state.chatRooms,\r\n    messages: state.messages,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addNewMessage,\r\n  logOut,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./LoginRegister.css\";\r\nimport { setCurrentUser } from \"../../redux/actions/usersAction\";\r\nimport { constants } from \"../../config/constants\";\r\nimport { addUserSession } from \"../../helpers/userSessionInfo\";\r\nimport { initSocket } from \"../../helpers/sockets\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: null,\r\n      password: null,\r\n    };\r\n  }\r\n\r\n  addUserTochatRoom = (userid) =>\r\n    axios.get(\r\n      `${constants.api}invite/user/${userid}/chatroom/${this.props.match.params.roomid}`\r\n    );\r\n\r\n  // Bindea los inputs con el estado\r\n  handleChange = (event) => {\r\n    this.setState({\r\n      [event.target.id]: event.target.value,\r\n    });\r\n  };\r\n\r\n  // Hace el Submit del Form\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    axios\r\n      .post(`${constants.api}auth/login`, this.state)\r\n      .then((response) => {\r\n        let { chatRooms, ...other } = response.data.user;\r\n        addUserSession(response.data.token);\r\n        if (\r\n          this.props.match.params?.iduser ||\r\n          this.props.match.params?.roomid\r\n        ) {\r\n          this.addUserTochatRoom(other._id)\r\n            .then((res) => {\r\n              toast.success(\"User added to chatroom\");\r\n              chatRooms.push(res.data);\r\n              this.props.setCurrentUser({\r\n                token: response.data.token,\r\n                chatRooms,\r\n                user: other,\r\n              });\r\n              initSocket();\r\n              toast.success(\"User Logged Succesfuly\");\r\n              return this.props.history.push(\"/\");\r\n            })\r\n            .catch(() => {});\r\n        } else {\r\n          this.props.setCurrentUser({\r\n            token: response.data.token,\r\n            chatRooms,\r\n            user: other,\r\n          });\r\n          initSocket();\r\n          toast.success(\"User Logged Succesfuly\");\r\n          return this.props.history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  render() {\r\n    if (this.props.isAuth === true) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-tittle\">Log In</div>\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"username\"> User name </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"username\"\r\n              name=\"username\"\r\n              placeholder=\"username\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"password\"> Password </label>\r\n            <input\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              type=\"password\"\r\n              required\r\n              name=\"password\"\r\n              id=\"password\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <button className=\"linkHover\" type=\"submit\">\r\n              Login\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div className=\"center\">\r\n          <label> Do you don't have an account? </label>\r\n          <Link className=\"out_link linkHover\" to=\"/register\">\r\n            Sign Up\r\n          </Link>\r\n        </div>\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.isAuth,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  setCurrentUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"../Login/LoginRegister.css\";\r\nimport { constants } from \"../../config/constants\";\r\n\r\nclass Register extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      firstname: \"\",\r\n      lastname: \"\",\r\n      password: \"\",\r\n    };\r\n  }\r\n\r\n  // Bindea los inputs con el estado\r\n  handleChange = (event) => {\r\n    this.setState({\r\n      [event.target.id]: event.target.value,\r\n    });\r\n  };\r\n\r\n  // Hace el Submit del Form\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    axios\r\n      .post(`${constants.api}user/create`, this.state)\r\n      .then(() => {\r\n        toast.success(\"User Created Succesfuly\");\r\n        this.props.history.push(\"/login\");\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-tittle\">Sign Up</div>\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"name\"> User name </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"username\"\r\n              name=\"username\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"firstname\"> First name </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.firstname}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"firstname\"\r\n              name=\"firstname\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"lastname\"> \r\n              Last name \r\n            </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.lastname}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"lastname\"\r\n              name=\"lastname\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"password\"> Password </label>\r\n            <input\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              type=\"password\"\r\n              required\r\n              name=\"password\"\r\n              id=\"password\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <button className=\"linkHover\" type=\"submit\">\r\n              Sign Up\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div>\r\n          <label> \r\n            Do you already have an account? \r\n          </label>\r\n          <Link className=\"out_link linkHover\" to=\"/login\">\r\n            Log In\r\n          </Link>\r\n        </div>\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Register;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { constants } from \"../../config/constants\";\r\nimport { addUserSession, getJwt } from \"../../helpers/userSessionInfo\";\r\nimport { addNewRoom } from \"../../redux/actions/usersAction\";\r\n\r\nclass InviteUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: {},\r\n      isLoading: false,\r\n      chatRoom: {},\r\n      token: null,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({ isLoading: true, userAdded: false, token: getJwt() });\r\n    axios\r\n      .get(\r\n        `${constants.api}user/invite/${this.props.match.params.iduser}/chatroom/${this.props.match.params.roomid}`\r\n      )\r\n      .then((res) => {\r\n        if (this.state.token !== null) {\r\n          addUserSession(this.state.token);\r\n        }\r\n        this.setState({\r\n          user: res.data,\r\n          isLoading: false,\r\n          chatRoom: res.data.chatRooms[0],\r\n        });\r\n      })\r\n      .catch(() => {});\r\n  }\r\n\r\n  addUserTochatRoom = () => {\r\n    this.setState({ isLoading: true, userAdded: false });\r\n    var decoded = jwt_decode(this.state.token);\r\n    axios\r\n      .get(\r\n        `${constants.api}invite/user/${decoded._id}/chatroom/${this.props.match.params.roomid}`\r\n      )\r\n      .then((res) => {\r\n        toast.success(\"User Added Succesfuly\");\r\n        this.props.addNewRoom(res.data);\r\n        this.setState({ isLoading: false, userAdded: true });\r\n      })\r\n      .catch(() => {});\r\n  };\r\n  render() {\r\n    const { user, isLoading, chatRoom, userAdded, token } = this.state;\r\n    if (isLoading) {\r\n      return <p>Loading ...</p>;\r\n    }\r\n\r\n    if (userAdded) {\r\n      return (\r\n        <div className=\"wrapper\">\r\n          <div className=\"form-tittle\">ChatRoom App Invitation </div>\r\n          You have been added succesfuly\r\n          <Link className=\"out_link linkHover\" to=\"/\">\r\n            Go to ChatRoomApp\r\n          </Link>\r\n          <ToastContainer autoClose={2000} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <div className=\"form-tittle\">ChatRoom App Invitation </div>\r\n        Hello, You have a pending request from the user\r\n        <div className=\"datosUser\">\r\n          <img\r\n            src={`${constants.IP_Server}/avatars/${user.avatar}`}\r\n            alt=\"\"\r\n            className=\"photo\"\r\n          />\r\n          <span className=\"text-capitalize\">\r\n            {user.firstname} {user.lastname}\r\n            <i>{` (${user.username})`}</i>\r\n          </span>\r\n        </div>\r\n        <br />\r\n        Do you want to be added to the chat room\r\n        <div className=\"text-capitalize\">{chatRoom.name}</div>\r\n        {token == null && (\r\n          <div>\r\n            <h4>\r\n              NOTE: You need to login first, Would you like be redirected to\r\n              login page and set a session?\r\n            </h4>\r\n          </div>\r\n        )}\r\n        <br />\r\n        <div className=\"divOkCancel\">\r\n          {token == null ? (\r\n            <Link\r\n              className=\"out_link linkHover\"\r\n              to={`/login/invite/user/${this.props.match.params.iduser}/chatroom/${this.props.match.params.roomid}`}\r\n            >\r\n              Ok\r\n            </Link>\r\n          ) : (\r\n            <button\r\n              className=\"linkHover\"\r\n              style={{ width: \"100px\", opacity: \"0.5\", margin: \"10px\" }}\r\n              onClick={this.addUserTochatRoom}\r\n            >\r\n              Ok\r\n            </button>\r\n          )}\r\n        </div>\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addNewRoom,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(InviteUser);\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nconst PrivateRoute = ({ component: Component, isAuth, ...rest }) => (\r\n    <Route {...rest} render={props =>\r\n        isAuth === true ?\r\n            <Component {...props} />\r\n            :\r\n            <Redirect to=\"/login\" /> }\r\n    />\r\n);\r\n\r\nconst mapStateToProps = state => (\r\n{\r\n    isAuth: state.isAuth\r\n});\r\n\r\nexport default connect(mapStateToProps)(PrivateRoute);","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { Switch, Route, BrowserRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./App.css\";\r\nimport store from \"./redux/store\";\r\nimport Main from \"./components/Main/Main\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Register from \"./components/Register/Register\";\r\nimport InviteUser from \"./components/InviteUser/InviteUser\";\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport {\r\n  addUserSession,\r\n  getJwt,\r\n  removeUserSession,\r\n} from \"./helpers/userSessionInfo\";\r\nimport { setCurrentUser, setUserToken } from \"./redux/actions/usersAction\";\r\nimport { constants } from \"./config/constants\";\r\nimport { initSocket, socket } from \"./helpers/sockets\";\r\nconst token = getJwt();\r\n\r\nif (token) {\r\n  try {\r\n    const decoded = jwt_decode(token);\r\n    addUserSession(token);\r\n    store.dispatch(setUserToken(decoded));\r\n    axios\r\n      .post(`${constants.api}auth/token`, decoded)\r\n      .then((response) => {\r\n        const { chatRooms, ...other } = response.data.user;\r\n        store.dispatch(\r\n          setCurrentUser({\r\n            token,\r\n            chatRooms,\r\n            user: other,\r\n          })\r\n        );\r\n        if (!socket) \r\n          initSocket();\r\n      })\r\n      .catch((err) => {\r\n        toast.error(err.response?.data);\r\n      });\r\n  } catch(err) {\r\n    removeUserSession();\r\n    toast.error(err.message);\r\n  }\r\n}\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <PrivateRoute\r\n            exact\r\n            path=\"/\"\r\n            isAuth={this.props.isAuth}\r\n            component={Main}\r\n          />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route\r\n            exact\r\n            path=\"/login/invite/user/:iduser/chatroom/:roomid\"\r\n            component={Login}\r\n          />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route\r\n            path=\"/invite/user/:iduser/chatroom/:roomid\"\r\n            component={InviteUser}\r\n          />\r\n        </Switch>\r\n        <ToastContainer autoClose={2000} />\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.isAuth,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrentUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport store from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}