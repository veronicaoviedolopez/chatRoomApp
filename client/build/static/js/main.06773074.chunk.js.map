{"version":3,"sources":["redux/actions/usersAction.js","redux/reducers/usersReducer.js","redux/store.js","config/constants.js","helpers/userSessionInfo.js","components/Header/Header.js","components/MessageArea/MessageList/MessageList.js","components/MessageArea/NewMessage/NewMessage.js","components/MessageArea/MessageArea.js","components/MessageArea/WelcomeMessage/WelcomeMessage.js","components/CounterMessages/CounterMessages.js","components/RoomList/RoomList.js","components/UserMenu/UserMenu.js","components/UserList/UserList.js","components/LeftSide/LeftSide.js","helpers/sockets.js","components/Main/Main.js","components/Login/Login.js","components/Register/Register.js","components/InviteUser/InviteUser.js","App.js","PrivateRoute.js","index.js"],"names":["types","setCurrentUser","userLogged","type","payload","addNewRoom","addNewMessage","initialState","isAuth","user","users","chatRoom","chatRooms","messages","devtoools","window","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","state","userTypes","chatroom","find","_id","count","filter","p","chat","constants","addUserSession","token","localStorage","setItem","axios","defaults","headers","common","removeUserSession","removeItem","getJwt","getItem","Header","props","className","chatRoom_name","onClick","logOut","moment","format","MessageList","map","msg","key","src","user_id","avatar","alt","firstname","lastname","username","date","fromNow","message","NewMessage","maxLength","placeholder","onKeyPress","e","shiftKey","target","value","readOnly","setReadonly","MessageArea","scrollToBottom","boxRef","current","scrollTop","scrollHeight","componentDidUpdate","React","createRef","ref","this","WithchatRooms","Component","style","width","height","opacity","CounterMessages","RoomList","setChatRoom","sala","index","chatRoomId","setCurrentChatRoom","id","name","undefined","UserMenu","location","origin","editUsername","editPassword","UserList","inviteUser","u","LeftSide","currentChatRoom","that","get","then","res","setUsers","data","setMessages","resetCountNewMessages","catch","err","toast","error","response","alertify","prompt","evt","patch","resp","editCurrentUser","success","set","password","newChatRoom","post","redireccionar","history","push","confirm","setting","onok","link","navigator","clipboard","writeText","setHeader","ok","cancel","show","tittle","Helmet","reduce","c","content","mapDispatchToProps","connect","socket","initSocket","newMessageAudio","Audio","newState","getState","io","on","console","log","x","emit","chatroom_id","dispatch","receivedMessage","play","Main","sendMessage","connected","WelcomeMessage","length","autoClose","Login","addUserTochatRoom","userid","match","params","roomid","handleChange","event","setState","handleSubmit","preventDefault","other","iduser","to","onSubmit","htmlFor","autoFocus","onChange","required","Register","InviteUser","isLoading","userAdded","decoded","jwt_decode","margin","component","rest","render","My404Component","App","exact","path","from","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.06773074.chunk.js","sourcesContent":["export const types = {\r\n  set: \"SET_CURRENT_USER\",\r\n  edit: \"EDIT_CURRENT_USER\",\r\n  setUsers: \"SET_USERS\",\r\n  addNewRoom: \"ADD_CHATROOM\",\r\n  setChatRoom: \"SET_CURRENT_CHATROOM\",\r\n  setMessages: \"SET_MESSAGES\",\r\n  reset: \"RESET_STORE\",\r\n  addNewMessage: \"ADD_NEW_MESSAGE\",\r\n  setUserToken: \"SET_USER_TOKEN\",\r\n  setCountNewMessages: \"SET_COUNT_NEW_MESSAGES\",\r\n  resetCountNewMessages: \"RESET_COUNT_NEW_MESSAGES\"\r\n};\r\n\r\n// Asigna el current User\r\nexport const setCurrentUser = userLogged => ({\r\n  type: types.set,\r\n  payload: userLogged,\r\n});\r\n\r\n// Asigna el token User\r\nexport const setUserToken = payload => ({\r\n  type: types.setUserToken,\r\n  payload,\r\n});\r\n\r\n// Editar el current User\r\nexport const editCurrentUser = payload => ({\r\n  type: types.edit,\r\n  payload,\r\n});\r\n\r\n// Asigna Usuarios de sala Seleccionada\r\nexport const setUsers = users => ({\r\n  type: types.setUsers,\r\n  payload: users,\r\n});\r\n\r\n// Asigna nueva sala\r\nexport const addNewRoom = payload => ({\r\n  type: types.addNewRoom,\r\n  payload,\r\n});\r\n\r\n// Asigna current sala\r\nexport const setChatRoom = payload => ({\r\n  type: types.setChatRoom,\r\n  payload,\r\n});\r\n\r\n// Asigna mensajes de la sala seleccionada\r\nexport const setMessages = payload => ({\r\n  type: types.setMessages,\r\n  payload,\r\n});\r\n\r\n// Asigna nuevo mensaje\r\nexport const addNewMessage = payload => ({\r\n  type: types.addNewMessage,\r\n  payload,\r\n});\r\n\r\n// LogOut and reset store\r\nexport const logOut = () => ({\r\n  type: types.reset\r\n});\r\n\r\n\r\n// Actualiza contador de mensajes sin visualizar por chatroom\r\nexport const setCountNewMessages = payload => ({\r\n  type: types.setCountNewMessages,\r\n  payload,\r\n});\r\n\r\n// Resetea contador de mensajes sin visualizar por chatroom\r\nexport const resetCountNewMessages = payload => ({\r\n  type: types.resetCountNewMessages,\r\n  payload,\r\n})","import { types as userTypes } from \"../actions/usersAction\";\r\n\r\nconst initialState = {\r\n  isAuth: false,\r\n  user: {},\r\n  users: [],\r\n  chatRoom: {},\r\n  chatRooms: [],\r\n  messages: [],\r\n};\r\n\r\nexport default (state = initialState, { type, payload }) => {\r\n  switch (type) {\r\n    case userTypes.set:\r\n      return {\r\n        ...state,\r\n        isAuth: true,\r\n        user: payload.user,\r\n        chatRooms: payload.chatRooms,\r\n      };\r\n      case userTypes.edit:\r\n      return {\r\n        ...state,\r\n        user: payload,\r\n      };\r\n    case userTypes.setUsers:\r\n      return {\r\n        ...state,\r\n        users: payload,\r\n      };\r\n    case userTypes.reset:\r\n      return initialState;\r\n    case userTypes.addNewRoom:\r\n      return {\r\n        ...state,\r\n        chatRooms: [...state.chatRooms, payload],\r\n      };\r\n    case userTypes.setChatRoom:\r\n      return {\r\n        ...state,\r\n        chatRoom: payload,\r\n      };\r\n    case userTypes.setMessages:\r\n      return {\r\n        ...state,\r\n        messages: payload\r\n      }\r\n    case userTypes.addNewMessage:\r\n      return {\r\n        ...state,\r\n        messages: [...state.messages, payload],\r\n      }\r\n      case userTypes.setUserToken:\r\n        return {\r\n          ...state,\r\n          user: payload,\r\n          isAuth: true,\r\n        };\r\n      case userTypes.setCountNewMessages:\r\n        const chatroom = state.chatRooms.find(chatroom => chatroom._id === payload)\r\n        return {\r\n          ...state,\r\n          chatRooms: [\r\n            { ...chatroom, count: chatroom.count ? ++chatroom.count : 1},\r\n            ...state.chatRooms.filter(p => p!== chatroom), \r\n           ]\r\n        };\r\n        case userTypes.resetCountNewMessages:\r\n          const chat = state.chatRooms.find(chatroom => chatroom._id === payload)\r\n          delete chat.count; \r\n          return {\r\n            ...state,\r\n            chatRooms: [ \r\n              { ...chat}, \r\n              ...state.chatRooms.filter(p => p!== chat)]\r\n          }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createStore } from \"redux\";\r\nimport reducer from \"./reducers/usersReducer\";\r\n\r\nconst devtoools = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\nconst store = createStore(reducer, devtoools);\r\n\r\nexport default store;\r\n","export const constants = {\r\n  JWTSecret: 'asdfghjkl',\r\n  numeroSalt: 10,\r\n  newMessageSound: \"/sound/piece-of-cake.mp3\"\r\n};\r\n","import axios from 'axios';\r\n\r\nexport const addUserSession = token => {\r\n    // Agrega token al localStorage\r\n    localStorage.setItem('chatRoomJWT', token);\r\n    // Agrega token al header de Axios\r\n    axios.defaults.headers.common['auth-token'] = token;\r\n}\r\n\r\nexport const removeUserSession = () => {\r\n    // Remueve token al localStorage\r\n    localStorage.removeItem('chatRoomJWT');\r\n    // Remueve token al header de Axios\r\n    delete axios.defaults.headers.common['auth-token'];\r\n}\r\n\r\nexport const getJwt = () => localStorage.getItem('chatRoomJWT');\r\n","import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nconst Header = props => (\r\n  <nav className=\"main-nav\">\r\n    <ul>\r\n      <li>{props.chatRoom_name}</li>\r\n    </ul>\r\n    <div>\r\n      <button onClick={props.logOut}>Log Out</button>\r\n    </div>\r\n  </nav>\r\n);\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport moment from \"moment\";\r\nimport { constants } from \"../../../config/constants\";\r\nmoment().format();\r\n\r\nconst MessageList = (props) => (\r\n  <div>\r\n    {props.messages.map((msg) => (\r\n      <div key={msg._id} className=\"FlexRow\">\r\n        <img\r\n          src={`/avatars/${msg.user_id.avatar}`}\r\n          alt=\"\"\r\n          className=\"photoMsg\"\r\n        />\r\n        <div className=\"row width100\">\r\n          <div className=\"col-xs\">\r\n            <small>\r\n              {`${msg.user_id.firstname} ${msg.user_id.lastname}`}\r\n            </small>\r\n            <i>\r\n              <small> \r\n                {` [${msg.user_id.username}] `} \r\n              </small>\r\n            </i>\r\n            <span className=\"date\"> \r\n              {`  ${moment(msg.date).fromNow()}`} \r\n            </span>\r\n          </div>\r\n          <span className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n            {msg.message}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nMessageList.propTypes = {\r\n  optionalArrayOf: PropTypes.arrayOf(PropTypes.object),\r\n};\r\n\r\nexport default MessageList;\r\n","import React from \"react\";\r\n\r\nconst NewMessage = (props) => {\r\n  const handleUserKeyPress = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      props.onKeyPress(e.target.value);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <textarea\r\n      className=\"newMessage-container\"\r\n      type=\"text\"\r\n      maxLength=\"200\"\r\n      placeholder=\"Escribe un mensaje\"\r\n      onKeyPress={handleUserKeyPress}\r\n      readOnly={props.setReadonly}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import React, { Component } from \"react\";\r\nimport \"./MessageArea.css\";\r\nimport MessageList from \"./MessageList/MessageList\";\r\nimport NewMessage from \"./NewMessage/NewMessage\";\r\n\r\nclass MessageArea extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.boxRef = React.createRef();\r\n  }\r\n  scrollToBottom = () => {\r\n    this.boxRef.current.scrollTop = this.boxRef.current.scrollHeight;\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    this.scrollToBottom();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"messagesArea-container\">\r\n        <div className=\"messages-container\" ref={this.boxRef}>\r\n          <MessageList\r\n            messages={this.props.messages}\r\n            WithchatRooms={this.props.WithchatRooms} />\r\n        </div>\r\n        <NewMessage onKeyPress={this.props.onKeyPress} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MessageArea;\r\n","import React from \"react\";\r\n\r\nexport default (props) => {\r\n  return (\r\n    <div className=\"welcomeMessage\">\r\n      <strong>\r\n        <h2>Welcome To ChatRoom App</h2>\r\n      </strong>\r\n      <br />\r\n      {props.WithchatRooms ? (\r\n        <h3>\r\n          You have to add a new ChatRoom \r\n          <br />\r\n          <br />\r\n          In order to start a chat, You need to add a new chatRoom, invite\r\n          people and then start to chat with them\r\n        </h3>\r\n      ) : (\r\n        <h3>\r\n          Select a ChatRoom \r\n          <br /> \r\n          <br />\r\n          Send and receive messages in a chatRoom, you can share it with all\r\n          user into the chatroom\r\n        </h3>\r\n      )}\r\n      <img\r\n        alt=\"logo\"\r\n        src=\"/img/human-chain.png\"\r\n        style={{ width: \"250px\", height: \"250px\", opacity: \"0.5\" }} />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./CounterMessages.css\";\r\n\r\nconst CounterMessages = props => (\r\n    <span className=\"div-msg-counter\"> {props.count> 99 ? `+${props.count}` : props.count} </span>\r\n);\r\n\r\nexport default CounterMessages;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./RoomList.css\";\r\nimport \"../CounterMessages/CounterMessages\";\r\nimport CounterMessages from \"../CounterMessages/CounterMessages\";\r\n\r\nconst RoomList = (props) => (\r\n  <div>\r\n    <div className=\"tittle\">\r\n      <span style={{ width: \"90%\" }}> ChatRooms </span>\r\n      <div className=\"tooltip\" style={{ width: \"10%\" }}>\r\n        <span className=\"tooltiptext\">new chatRoom</span>\r\n        <span className=\"linkHover\" onClick={props.setChatRoom}>+</span>\r\n      </div>\r\n    </div>\r\n\r\n    <ul className=\"navSalas\">\r\n      {props.chatRooms.map((sala, index) => (\r\n        <li\r\n          className={\r\n            props.chatRoomId === sala._id ? \"linkSelected\" : \"linkHover\"\r\n          }\r\n          key={index}\r\n          onClick={props.setCurrentChatRoom}\r\n          id={sala._id}\r\n        >\r\n          {sala.name}\r\n          <sup key={index}>\r\n            {\r\n              sala.count !== undefined &&\r\n                <CounterMessages count={sala.count} />\r\n            }\r\n          </sup>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\nRoomList.propTypes = {\r\n  chatRooms: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default RoomList;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { constants } from \"../../config/constants\";\r\nimport \"./UserMenu.css\";\r\n\r\nconst UserMenu = (props) => (\r\n  <div>\r\n    <div className=\"datosUser\">\r\n      <img\r\n        src={`${window.location.origin}/avatars/${props.user.avatar}`}\r\n        alt=\"\"\r\n        className=\"photo\"\r\n      />\r\n      <span>\r\n        {props.user.firstname} {props.user.lastname}{\" \"}\r\n        <i>\r\n          <small>{` [${props.user.username}]`}</small>\r\n        </i>\r\n      </span>\r\n    </div>\r\n\r\n    <div>\r\n      <div className=\"tittle\">\r\n        <span> Menu </span>\r\n      </div>\r\n      <nav>\r\n        <ul className=\"userMenu\">\r\n          <li className=\"linkHover\" onClick={props.editUsername}>\r\n            Edit Username\r\n          </li>\r\n          <li className=\"linkHover\" onClick={props.editPassword}>\r\n            Change Password\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nUserMenu.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default UserMenu;\r\n","import React from \"react\";\r\nimport \"./UserList.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst UserList = (props) => (\r\n  <div>\r\n    <div className=\"tittle\">\r\n      <span style={{ width: \"90%\" }}> Users </span>\r\n      <div style={{ width: \"10%\" }}>\r\n        <span className=\"linkHover\" onClick={props.inviteUser}>+</span>\r\n      </div>\r\n    </div>\r\n    <nav>\r\n      <ul className=\"navUsers\">\r\n        {props.users.map((u, index) => (\r\n          <li className=\"linkHover\" key={index}>\r\n            {u.firstname} {u.lastname}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n);\r\n\r\nUserList.propTypes = {\r\n  users: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default UserList;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport alertify from \"alertifyjs\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport \"./LeftSide.css\";\r\nimport { constants } from \"../../config/constants\";\r\nimport RoomList from \"../RoomList/RoomList\";\r\nimport UserMenu from \"../UserMenu/UserMenu\";\r\nimport UserList from \"../UserList/UserList\";\r\nimport {\r\n  setUsers,\r\n  editCurrentUser,\r\n  addNewRoom,\r\n  setChatRoom,\r\n  setMessages,\r\n  resetCountNewMessages,\r\n} from \"../../redux/actions/usersAction\";\r\n\r\nclass LeftSide extends Component {\r\n  currentChatRoom = (e) => {\r\n    const that = this.props;\r\n    if (that.chatRoom._id === e.target.id) \r\n      return;\r\n    axios\r\n      .get(`/api/chatroom/select/${e.target.id}`)\r\n      .then((res) => {\r\n        that.setUsers(res.data.users);\r\n        that.setChatRoom({ _id: res.data._id, name: res.data.name });\r\n        that.setMessages(res.data.messages);\r\n        that.resetCountNewMessages(res.data._id);\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  editUsername = () => {\r\n    const that = this.props;\r\n    alertify\r\n      .prompt(\r\n        \"Chage Username\",\r\n        \"New Username:\",\r\n        that.user.username,\r\n        function (evt, username) {\r\n          axios\r\n            .patch(`/api/user/edit/${that.user._id}`, { username })\r\n            .then((resp) => {\r\n              that.editCurrentUser(resp.data);\r\n              alertify.success(\"Username Updated\");\r\n            })\r\n            .catch((err) => alertify.error(err.response?.data));\r\n        },\r\n        () => {}\r\n      )\r\n      .set(\"type\", \"text\");\r\n  };\r\n\r\n  editPassword = () => {\r\n    const that = this.props;\r\n    alertify\r\n      .prompt(\r\n        \"Change Password\",\r\n        \"New Password:\",\r\n        \"\",\r\n        function (evt, password) {\r\n          axios\r\n            .patch(`/api/user/edit/${that.user._id}`, { password })\r\n            .then((resp) => {\r\n              that.editCurrentUser(resp.data);\r\n              alertify.success(\"Password Updated\");\r\n            })\r\n            .catch((err) => alertify.error(err.response?.data));\r\n        },\r\n        () => {}\r\n      )\r\n      .set(\"type\", \"password\");\r\n  };\r\n\r\n  newChatRoom = () => {\r\n    const that = this.props;\r\n    alertify\r\n      .prompt(\r\n        \"New RoomChat\",\r\n        \"Name:\",\r\n        \"\",\r\n        function (evt, name) {\r\n          axios\r\n            .post(`/api/chatroom/create`, {\r\n              name,\r\n              users: [that.user._id],\r\n            })\r\n            .then((res) => {\r\n              that.addNewRoom(res.data);\r\n              that.setUsers(res.data.users);\r\n              that.setChatRoom({ _id: res.data._id, name: name });\r\n              that.setMessages(res.data.messages);\r\n              alertify.success(\"Ok: \" + name);\r\n            })\r\n            .catch((err) => toast.error(err.response?.data));\r\n        },\r\n        (err) => toast.error(err)\r\n      )\r\n      .set(\"type\", \"text\");\r\n  };\r\n\r\n  redireccionar = () => this.props.history.push(\"/login\");\r\n\r\n  inviteUser = () => {\r\n    const that = this.props;\r\n    if (that.chatRoom._id === undefined) {\r\n      alertify.error(\"You have to select a chatroom first\");\r\n      return;\r\n    }\r\n\r\n    alertify\r\n      .confirm()\r\n      .setting({\r\n        message: `Are you want to generate a link for invite users to chatroom <em> ${that.chatRoom.name}?</em> `,\r\n        onok: function () {\r\n          const link = `${window.location.origin}/invite/user/${that.user._id}/chatroom/${that.chatRoom._id}`;\r\n          navigator.clipboard.writeText(link);\r\n          alertify.success(\"link Copied, now Paste & Share it\");\r\n        },\r\n      })\r\n      .setHeader(\"<strong> Invite User to ChatRoom </strong> \")\r\n      .set(\"labels\", {\r\n        ok: \"Yes, Copy link to clipboard\",\r\n        cancel: \"No, Cancel\",\r\n      })\r\n      .show();\r\n  };\r\n  render() {\r\n    const { user, users, chatRooms, chatRoom } = this.props;\r\n    const tittle = \".:. ChatRoom App .:.\";\r\n    return (\r\n      <div className=\"left-menu-container\">\r\n        <UserMenu\r\n          user={user}\r\n          editUsername={this.editUsername}\r\n          editPassword={this.editPassword}\r\n        />\r\n        <RoomList\r\n          setChatRoom={this.newChatRoom}\r\n          chatRooms={chatRooms}\r\n          chatRoomId={this.props.chatRoom._id}\r\n          setCurrentChatRoom={this.currentChatRoom}\r\n        />\r\n        {this.props.chatRoom._id && (\r\n          <UserList inviteUser={this.inviteUser} users={users} />\r\n        )}\r\n        <Helmet>\r\n          <title>\r\n            {this.props.chatRoom._id\r\n              ? `chatRoom ${chatRoom.name} ${\r\n                  chatRoom.count ? \"(\" + this.props.count + \")\" : \"\"\r\n                }`\r\n              : `${tittle} ${chatRooms.reduce(\r\n                  (count, c) => count + (c.count ? c.count : 0),\r\n                  0\r\n                )} messages`}\r\n          </title>\r\n          <meta name=\"title\" content={chatRoom._id ? chatRoom.name : tittle} />\r\n        </Helmet>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    users: state.users,\r\n    chatRooms: state.chatRooms,\r\n    chatRoom: state.chatRoom,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addNewRoom,\r\n  setUsers,\r\n  setChatRoom,\r\n  setMessages,\r\n  editCurrentUser,\r\n  resetCountNewMessages,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftSide);\r\n","import store from \"../redux/store\";\r\nimport io from \"socket.io-client\";\r\nimport { addNewMessage, setCountNewMessages } from '../redux/actions/usersAction';\r\nimport { constants } from \"../config/constants\";\r\n\r\nexport let socket = null;\r\n\r\nexport const initSocket = () => {\r\n  const newMessageAudio = new Audio(constants.newMessageSound);\r\n  let newState = store.getState();\r\n  socket = io(window.location.origin);\r\n  \r\n  socket.on(\"login\", (data) => {\r\n    console.log(\"WELCOME to SOCKET.IO \", data.id);\r\n    newState.chatRooms.map(x =>\r\n      socket.emit('enter to room', {\r\n        username: newState.user.username, \r\n        chatroom: x._id})\r\n    );\r\n  });\r\n\r\n  socket.on(\"new message\", (message) => {\r\n    console.log(\"new message\");\r\n    newState = store.getState();\r\n    if(newState.chatRoom._id === undefined ||  newState.chatRoom._id !== message.chatroom_id){\r\n      store.dispatch(setCountNewMessages(message.chatroom_id));\r\n    }\r\n    else {\r\n      receivedMessage(message);\r\n      newMessageAudio.play();\r\n    }\r\n  });\r\n\r\n  socket.on(\"reconnect\", () => {\r\n    console.log(\"you have been reconnected\");\r\n  });\r\n\r\n  socket.on(\"reconnect_error\", () => {\r\n    console.log(\"attempt to reconnect has failed\");\r\n  });\r\n\r\n  socket.on(\"disconnect\", () => {\r\n    console.log('disconnect')\r\n  })\r\n\r\n\r\n  const receivedMessage = (msg) => {\r\n    store.dispatch(addNewMessage(msg));\r\n  };\r\n\r\n  return socket;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"./main.css\";\r\nimport { constants } from \"../../config/constants\";\r\nimport { addNewMessage, logOut } from \"../../redux/actions/usersAction\";\r\nimport { removeUserSession } from \"../../helpers/userSessionInfo\";\r\nimport Header from \"../Header/Header\";\r\nimport MessageArea from \"../MessageArea/MessageArea\";\r\nimport WelcomeMessage from \"../MessageArea/WelcomeMessage/WelcomeMessage\";\r\nimport LeftSide from \"../LeftSide/LeftSide\";\r\nimport { socket } from \"../../helpers/sockets\";\r\n\r\nclass Main extends Component {\r\n  sendMessage = (message) => {\r\n    if (message === \"\" || message === \"\\n\" || !socket.connected) \r\n      return;\r\n\r\n    const msg = {\r\n      message,\r\n      user_id: this.props.user._id,\r\n      chatroom_id: this.props.chatRoom._id,\r\n    };\r\n\r\n    axios\r\n      .post(`/api/chatroom/message/create`, msg)\r\n      .then((res) => {\r\n        msg.user_id = this.props.user;\r\n        this.props.addNewMessage({ ...res.data });\r\n        socket.emit(\"new message\", { ...res.data });\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  logOut = () => {\r\n    socket.emit(\"disconnection\");\r\n    removeUserSession();\r\n    this.props.logOut();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"dashboard\">\r\n        <LeftSide />\r\n        <div className=\"messages-area\">\r\n          <Header\r\n            chatRoom_name={this.props.chatRoom.name}\r\n            logOut={this.logOut}\r\n          />\r\n          {!this.props.chatRoom._id && (\r\n            <WelcomeMessage WithchatRooms={this.props.chatRooms.length === 0} />\r\n          )}\r\n          {this.props.chatRoom._id && (\r\n            <MessageArea\r\n              messages={this.props.messages}\r\n              onKeyPress={this.sendMessage}\r\n            />\r\n          )}\r\n          <ToastContainer autoClose={2000} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    chatRoom: state.chatRoom,\r\n    user: state.user,\r\n    chatRooms: state.chatRooms,\r\n    messages: state.messages,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addNewMessage,\r\n  logOut,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./LoginRegister.css\";\r\nimport { setCurrentUser } from \"../../redux/actions/usersAction\";\r\nimport { constants } from \"../../config/constants\";\r\nimport { addUserSession } from \"../../helpers/userSessionInfo\";\r\nimport { initSocket } from \"../../helpers/sockets\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: null,\r\n      password: null,\r\n    };\r\n  }\r\n\r\n  addUserTochatRoom = (userid) =>\r\n    axios.get(\r\n      `/api/invite/user/${userid}/chatroom/${this.props.match.params.roomid}`\r\n    );\r\n\r\n  // Bindea los inputs con el estado\r\n  handleChange = (event) => {\r\n    this.setState({\r\n      [event.target.id]: event.target.value,\r\n    });\r\n  };\r\n\r\n  // Hace el Submit del Form\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    axios\r\n      .post(`/api/auth/login`, this.state)\r\n      .then((response) => {\r\n        let { chatRooms, ...other } = response.data.user;\r\n        addUserSession(response.data.token);\r\n        if (\r\n          this.props.match.params?.iduser ||\r\n          this.props.match.params?.roomid\r\n        ) {\r\n          this.addUserTochatRoom(other._id)\r\n            .then((res) => {\r\n              toast.success(\"User added to chatroom\");\r\n              chatRooms.push(res.data);\r\n              this.props.setCurrentUser({\r\n                token: response.data.token,\r\n                chatRooms,\r\n                user: other,\r\n              });\r\n              initSocket();\r\n              toast.success(\"User Logged Succesfuly\");\r\n              return this.props.history.push(\"/\");\r\n            })\r\n            .catch(() => {});\r\n        } else {\r\n          this.props.setCurrentUser({\r\n            token: response.data.token,\r\n            chatRooms,\r\n            user: other,\r\n          });\r\n          initSocket();\r\n          toast.success(\"User Logged Succesfuly\");\r\n          return this.props.history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => toast.error(err.response?.data));\r\n  };\r\n\r\n  render() {\r\n    if (this.props.isAuth === true) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-tittle\">Log In</div>\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"username\"> User name </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"username\"\r\n              name=\"username\"\r\n              placeholder=\"username\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"password\"> Password </label>\r\n            <input\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              type=\"password\"\r\n              required\r\n              name=\"password\"\r\n              id=\"password\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <button className=\"linkHover\" type=\"submit\">\r\n              Login\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div className=\"center\">\r\n          <label> Do you don't have an account? </label>\r\n          <Link className=\"out_link linkHover\" to=\"/register\">\r\n            Sign Up\r\n          </Link>\r\n        </div>\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.isAuth,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  setCurrentUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"../Login/LoginRegister.css\";\r\nimport { constants } from \"../../config/constants\";\r\n\r\nclass Register extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      firstname: \"\",\r\n      lastname: \"\",\r\n      password: \"\",\r\n    };\r\n  }\r\n\r\n  // Bindea los inputs con el estado\r\n  handleChange = (event) => {\r\n    this.setState({\r\n      [event.target.id]: event.target.value,\r\n    });\r\n  };\r\n\r\n  // Hace el Submit del Form\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    axios\r\n      .post(`/api/user/create`, this.state)\r\n      .then(() => {\r\n        toast.success(\"User Created Succesfuly\");\r\n        this.props.history.push(\"/login\");\r\n      })\r\n      .catch((err) => {\r\n        toast.error(err.response?.data);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"form-tittle\">Sign Up</div>\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"name\"> User name </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"username\"\r\n              name=\"username\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"firstname\"> First name </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.firstname}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"firstname\"\r\n              name=\"firstname\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"lastname\"> \r\n              Last name \r\n            </label>\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              value={this.state.lastname}\r\n              onChange={this.handleChange}\r\n              required\r\n              id=\"lastname\"\r\n              name=\"lastname\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <label htmlFor=\"password\"> Password </label>\r\n            <input\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              type=\"password\"\r\n              required\r\n              name=\"password\"\r\n              id=\"password\"\r\n              maxLength=\"20\"\r\n            />\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <button className=\"linkHover\" type=\"submit\">\r\n              Sign Up\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div>\r\n          <label> \r\n            Do you already have an account? \r\n          </label>\r\n          <Link className=\"out_link linkHover\" to=\"/login\">\r\n            Log In\r\n          </Link>\r\n        </div>\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Register;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { constants } from \"../../config/constants\";\r\nimport { addUserSession, getJwt } from \"../../helpers/userSessionInfo\";\r\nimport { addNewRoom } from \"../../redux/actions/usersAction\";\r\n\r\nclass InviteUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: {},\r\n      isLoading: false,\r\n      chatRoom: {},\r\n      token: null,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({ isLoading: true, userAdded: false, token: getJwt() });\r\n    axios\r\n      .get(\r\n        `${window.location.origin}/api/user/invite/${this.props.match.params.iduser}/chatroom/${this.props.match.params.roomid}`\r\n      )\r\n      .then((res) => {\r\n        if (this.state.token !== null) {\r\n          addUserSession(this.state.token);\r\n        }\r\n        this.setState({\r\n          user: res.data,\r\n          isLoading: false,\r\n          chatRoom: res.data.chatRooms[0],\r\n        });\r\n      })\r\n      .catch(() => {});\r\n  }\r\n\r\n  addUserTochatRoom = () => {\r\n    this.setState({ isLoading: true, userAdded: false });\r\n    var decoded = jwt_decode(this.state.token);\r\n    \r\n    axios\r\n      .get(\r\n        `${window.location.origin}/api/invite/user/${decoded._id}/chatroom/${this.props.match.params.roomid}`\r\n      )\r\n      .then((res) => {\r\n        toast.success(\"User Added Succesfuly\");\r\n        this.props.addNewRoom(res.data);\r\n        this.setState({ isLoading: false, userAdded: true });\r\n      })\r\n      .catch(() => {});\r\n  };\r\n  render() {\r\n    const { user, isLoading, chatRoom, userAdded, token } = this.state;\r\n    if (isLoading) {\r\n      return <p>Loading ...</p>;\r\n    }\r\n\r\n    if (userAdded) {\r\n      return (\r\n        <div className=\"wrapper\">\r\n          <div className=\"form-tittle\">ChatRoom App Invitation </div>\r\n          You have been added succesfuly\r\n          <Link className=\"out_link linkHover\" to=\"/\">\r\n            Go to ChatRoomApp\r\n          </Link>\r\n          <ToastContainer autoClose={2000} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <div className=\"form-tittle\">ChatRoom App Invitation </div>\r\n        Hello, You have a pending request from the user\r\n        <div className=\"datosUser\">\r\n          <img\r\n            src={`/avatars/${user.avatar}`}\r\n            alt=\"\"\r\n            className=\"photo\"\r\n          />\r\n          <span className=\"text-capitalize\">\r\n            {user.firstname} {user.lastname}\r\n            <i>{` (${user.username})`}</i>\r\n          </span>\r\n        </div>\r\n        <br />\r\n        Do you want to be added to the chat room\r\n        <div className=\"text-capitalize\">{chatRoom.name}</div>\r\n        {token == null && (\r\n          <div>\r\n            <h4>\r\n              NOTE: You need to login first, Would you like be redirected to\r\n              login page and set a session?\r\n            </h4>\r\n          </div>\r\n        )}\r\n        <br />\r\n        <div className=\"divOkCancel\">\r\n          {token == null ? (\r\n            <Link\r\n              className=\"out_link linkHover\"\r\n              to={`/login/invite/user/${this.props.match.params.iduser}/chatroom/${this.props.match.params.roomid}`}\r\n            >\r\n              Ok\r\n            </Link>\r\n          ) : (\r\n            <button\r\n              className=\"linkHover\"\r\n              style={{ width: \"100px\", opacity: \"0.5\", margin: \"10px\" }}\r\n              onClick={this.addUserTochatRoom}\r\n            >\r\n              Ok\r\n            </button>\r\n          )}\r\n        </div>\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addNewRoom,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(InviteUser);\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { Switch, Route, BrowserRouter, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./App.css\";\r\nimport store from \"./redux/store\";\r\nimport Main from \"./components/Main/Main\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Register from \"./components/Register/Register\";\r\nimport InviteUser from \"./components/InviteUser/InviteUser\";\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport {\r\n  addUserSession,\r\n  getJwt,\r\n  removeUserSession,\r\n} from \"./helpers/userSessionInfo\";\r\nimport { setCurrentUser, setUserToken } from \"./redux/actions/usersAction\";\r\nimport { constants } from \"./config/constants\";\r\nimport { initSocket, socket } from \"./helpers/sockets\";\r\nconst token = getJwt();\r\n\r\nif (token) {\r\n  try {\r\n    const decoded = jwt_decode(token);\r\n    addUserSession(token);\r\n    store.dispatch(setUserToken(decoded));\r\n    axios\r\n      .post(`/api/auth/token`, decoded)\r\n      .then((response) => {\r\n        const { chatRooms, ...other } = response.data.user;\r\n        store.dispatch(\r\n          setCurrentUser({\r\n            token,\r\n            chatRooms,\r\n            user: other,\r\n          })\r\n        );\r\n        if (!socket) \r\n          initSocket();\r\n      })\r\n      .catch((err) => {\r\n        toast.error(err.response?.data);\r\n      });\r\n  } catch(err) {\r\n    removeUserSession();\r\n    toast.error(err.message);\r\n  }\r\n}\r\n\r\nconst My404Component = () => {\r\n  return(<img src=\"https://saedx.com/blog/wp-content/uploads/2019/01/saedx-blog-featured-70.jpg\" alt=\"...\" />)\r\n}\r\n\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route exact path=\"/login/invite/user/:iduser/chatroom/:roomid\" component={Login} />\r\n          <Route exact path=\"/invite/user/:iduser/chatroom/:roomid\" component={InviteUser} />\r\n          {/* <PrivateRoute exact path=\"/\" isAuth={this.props.isAuth} component={Main} /> */}\r\n          <Route path='/404' component={My404Component} />\r\n          <Redirect from='*' to='/404' />\r\n        </Switch>\r\n        <ToastContainer autoClose={2000} />\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.isAuth,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrentUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nconst PrivateRoute = ({ component: Component, isAuth, ...rest }) => {\r\n    return(\r\n        <Route {...rest} render={props => (\r\n            isAuth === true ?\r\n                <Component {...props} />\r\n                : <Redirect to=\"/login\" />\r\n            )} />\r\n        );\r\n    };\r\n\r\nconst mapStateToProps = state => (\r\n{\r\n    isAuth: state.isAuth\r\n});\r\n\r\nexport default connect(mapStateToProps)(PrivateRoute);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport store from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}